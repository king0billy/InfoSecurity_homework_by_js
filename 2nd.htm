<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>列表</title>
</head>
<body>
  <div>
    <div>
      上传文件(罪魁祸首在script src) ： <input id = "fileId" type="file" name = "file"  />
    </div>
    html5新增的input file,,,没有用到jquery和js的es6,,,file.length和result.length相同<br>
    https://www.cnblogs.com/tianma3798/p/4355949.html<br>
    <progress id="pro" value="0"></progress>
    <p id="result" style="width:100%;word-break:break-all;word-wrap:break-word;"></p>
  </div>
</body>
<script >
  // var fileInput = document.querySelector("#fileId");
  // fileInput.addEventListener("change", function (event) {
  //   var file = fileInput.files[0];
  //   var reader = new FileReader();
  //   reader.readAsBinaryString(file);
  //   console.log(fileInput.files);
  //   reader.onload = function () {
  //     document.getElementById('result').innerHTML = reader.result;
  //   }
  // }, false);
  var file1 = document.getElementById('fileId');
  file1.onchange = function () {
    var file = file1.files[0];
    console.log(file);
    //读取为二进制
    var reader = new FileReader();
    reader.readAsBinaryString(file);
    // reader.readAsText(file);
    //显示进度
    var pro = document.getElementById('pro');
    pro.max = file.size;
    pro.value = 0;
    reader.onprogress = function (e) {
      pro.value = e.loaded;
    }
    reader.onload = function () {
      document.getElementById('result').innerHTML = reader.result;
      // console.log(reader);
      // console.log(reader.result);
      console.log(reader.result.length);
    }
  }
</script>
</html>




